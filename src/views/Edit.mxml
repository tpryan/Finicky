<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" actionBarVisible="false" creationComplete="init(event)" 
		xmlns:s="library://ns.adobe.com/flex/spark" title="Edit" xmlns:components="components.*">
	
	<fx:Script>
		<![CDATA[
			import com.terrenceryan.finicky.db.DBManager;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			import spark.transitions.SlideViewTransition;
			
			protected var dataToPush:Object = new Object;
			protected var dbManager:DBManager;
			
			protected var cameraUI:CameraUI = new CameraUI();
			
			[Bindable]
			protected var itemList:ArrayCollection = new ArrayCollection();
			
			
			protected function init(event:FlexEvent):void
			{
				dataToPush = data;
				dbManager = data.dbManager;
				cameraUI.addEventListener(MediaEvent.COMPLETE, onCameraReturn);
				itemList = dbManager.itemDAO.list();
				
				
			}
			
			protected function writeButton_clickHandler(event:MouseEvent):void
			{
				var trans:SlideViewTransition = new SlideViewTransition();
				trans.direction = "up";
				
				navigator.pushView(EditNote,dataToPush,null,trans);
				
			}
			
			
			
			protected function cameraButton_clickHandler(event:MouseEvent):void
			{
				cameraUI.launch("image");
				
			}
			
			protected function onCameraReturn(event:MediaEvent):void
			{
				cameraButton.photo = event.data.file.url;
				
			}
			
		]]>
	</fx:Script>
	
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		
		#editItemLabel, #editLocationLabel{
			fontFamily: "Liberator";
			fontSize: 40;
			color: #21211A;
		}
		
	</fx:Style>
	
	
	<s:Image id="bg" source="@Embed('/assets/bg/bg_detail.jpg')" horizontalCenter="0" />
	<s:Image id="tape" source="@Embed('/assets/bg/editTape.png')"  y="350" />
	
	<s:Label id="editItemLabel" top="10" width="100%" horizontalCenter="0" 
		 text="WHAT DID YOU FIND?" textAlign="center"/>
	<components:SuggestionTextBox id="itemTexInput" suggestionPool="{itemList}" depth="20"
								  top="61" width="100%" horizontalCenter="0"
								  textAlign="center" focusThickness="0"
								  />
	
	<s:Label id="editLocationLabel" top="170" width="100%" horizontalCenter="0"
		 text="WHERE DID YOU FIND IT?" textAlign="center"/>
	<s:Button top="205" label="Current Location" horizontalCenter="-0"
		  skinClass="skins.EditLocationButtonSkin"/>
	
	<components:PhotoButton id="cameraButton" top="355" horizontalCenter="-122" photo="/assets/items/{data.selectedIndex}.jpg" click="cameraButton_clickHandler(event)"  />
	<components:WriteButton id="writeButton" top="355" horizontalCenter="122" click="writeButton_clickHandler(event)" />
		
		
	
	
		
	
</s:View>
